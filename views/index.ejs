<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %></title>
</head>
<body>
  <% if (locals.currentUser) { %>
    <h1>Welcome back, <%= currentUser.first_name %>.</h1>
    <% if (locals.currentUser.is_member) { %>
      <p>You are a member!</p>
    <% } else { %>
      <p>You are not a member. <a href="/membership/member">Become one today.</a></p>
    <% } %>
    <% if (locals.currentUser.is_admin) { %>
      <p>You are an admin!</p>
    <% } else { %>
      <p>You are not an admin. <a href="/membership/admin">Do you have what it takes to be one today?</a></p>
    <% } %>
    <a href="/messages/create">Create a new message</a>
    <a href="/log-out">Log Out</a>
  <% } else { %>
    <h1>Welcome to the homepage.</h1>
    <a href="/log-in">Log In</a>
    <a href="/sign-up">Sign up</a>
  <% } %>
  <section class="messages">
    <% if (messages.length > 0) { %>
      <% messages.forEach((message) => { %>
        <article class="message">
          <header>
            <p><%= locals.currentUser?.is_member ? message.author : "anonymous" %></p>
            <p><%= locals.currentUser?.is_member ? message.timestamp : "when it was written..." %></p>
          </header>
          <h2><%= message.title %></h2>
          <p><%= message.text %></p>
        </article>
      <% }) %>
    <% } else { %>
      <p>There are currently no messages.</p>
    <% } %>
  </section>
</body>
</html>